<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doa√ß√µes para Hortas Comunit√°rias</title>
    <style>
        /* Estilos gerais */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            position: relative;
        }

        /* Estilo do header e navega√ß√£o */
        header {
            background-color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        header img {
            height: 60px;
            width: auto;
        }

        nav a {
            margin: 0 10px;
            text-decoration: none;
            color: #333;
            padding: 5px;
            transition: all 0.3s ease;
        }

        nav a:hover {
            color: rgb(34, 179, 42);
            text-decoration: underline;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        nav .active {
            background-color: #4bac4c;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
        }

        /* Estilo do container */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* Filtros */
        .filter {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .filter select,
        .filter button {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        /* Cards */
        .cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .card {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.274);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.301);
        }

        .card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .card-content {
            padding: 15px;
        }

        .card-content h3 {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 10px;
        }

        .card-content p {
            font-size: 1em;
            color: #000;
            margin: 5px 0;
        }

        .card-content .categoria {
            font-weight: bold;
        }

        .card-content .score {
            font-weight: bold;
        }

        /* Bot√£o de navega√ß√£o */
        .navigation-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        .navigation-buttons button {
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            background-color: #4bac4c;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .navigation-buttons button:hover {
            background-color: #3a8a3a;
        }

        /* Estilo do bot√£o de chat IA */
        .chatbot-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(to right, #34a853, #5bc6ff);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Estilo da aba de chat */
        .chatbox {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 350px;
            max-width: 90%;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
        }

        .chatbox-header {
            background-color: #34a853;
            color: white;
            padding: 10px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            font-size: 18px;
        }

        .chatbox-body {
            padding: 10px;
            height: 300px;
            overflow-y: auto;
            display: flex;
            flex-direction: column-reverse;
        }

        .chatbox-footer {
            display: flex;
            padding: 10px;
            border-top: 1px solid #ddd;
        }

        .chatbox-footer input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .chatbox-footer button {
            padding: 10px;
            background-color: #34a853;
            border: none;
            color: white;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>

<header>
    <img src="static/Imagens/Logo2.png" alt="Logo">
    <nav>
        <a href="#" class="active">Explorar</a>
        <a href="#">Como ajudar</a>
        <a href="#">Descubra</a>
        <a href="#">Como funciona</a>
        <a href="#">Buscar</a>
        <a href="#">Minha conta</a>
    </nav>
</header>

<div class="container">
    <h1>Explore nossas hortas comunit√°rias</h1>

    <div class="filter">
        <div>
            <select id="categoria" onchange="filtrarPorCategoria()">
                <option value="todos">Todas as categorias</option>
                <option value="infraestrutura">Infraestrutura</option>
                <option value="plantio">Plantio</option>
                <option value="ferramentas">Ferramentas</option>
                <option value="fertilizantes">Fertilizantes</option>
                <option value="mudas">Mudas</option>
                <option value="tecnologia">Tecnologia</option>
                <option value="sustentabilidade">Sustentabilidade</option>
                <option value="manutencao">Manuten√ß√£o</option>
                <option value="educacao">Educa√ß√£o</option>
            </select>
        </div>
    </div>

    <div class="cards" id="cards-container">
        <!-- Cards ser√£o adicionados dinamicamente -->
    </div>
</div>

<!-- Bot√£o de chat IA -->
<button class="chatbot-button" id="chatbot-btn">ü§ñ</button>

<!-- Janela de chat -->
<div class="chatbox" id="chatbox">
    <div class="chatbox-header">
        Assistente Virtual
    </div>
    <div class="chatbox-body" id="chatbox-body">
        <!-- Mensagens do chat -->
    </div>
    <div class="chatbox-footer">
        <input type="text" id="chat-input" placeholder="Digite sua pergunta..." />
        <button onclick="enviarMensagem()">Enviar</button>
    </div>
</div>

<script>
    const pesos = {
        cliques: 1.0,
        doacoes: 2.0,
        mediaDoacoesMes: 1.5,
        visitantesUnicos: 1.2,
        taxaRetorno: 1.8,
        eventos: 1.3
    };

    const cardsData = [
        { categoria: 'infraestrutura', title: 'Doa√ß√£o de √°gua pot√°vel', cliques: 100, doacoes: 50, mediaDoacoesMes: 5, visitantesUnicos: 200, taxaRetorno: 0.5, eventos: 2, img: 'static/Imagens/Hortas/agua.jpeg' },
        { categoria: 'infraestrutura', title: 'Constru√ß√£o de po√ßo', cliques: 90, doacoes: 45, mediaDoacoesMes: 4.5, visitantesUnicos: 180, taxaRetorno: 0.45, eventos: 1, img: 'static/Imagens/Hortas/poco.jpg' },
        { categoria: 'plantio', title: 'Precisamos de sementes', cliques: 80, doacoes: 30, mediaDoacoesMes: 3, visitantesUnicos: 150, taxaRetorno: 0.3, eventos: 1, img: 'static/Imagens/Hortas/sementes.jpg' },
        { categoria: 'plantio', title: 'Cultivo de hortali√ßas', cliques: 85, doacoes: 35, mediaDoacoesMes: 3.5, visitantesUnicos: 160, taxaRetorno: 0.35, eventos: 2, img: 'static/Imagens/Hortas/hortalicas.jpg' },
        { categoria: 'ferramentas', title: 'Precisamos de enxadas', cliques: 120, doacoes: 60, mediaDoacoesMes: 6, visitantesUnicos: 250, taxaRetorno: 0.6, eventos: 3, img: 'static/Imagens/Hortas/enxadas.png' },
        { categoria: 'fertilizantes', title: 'Necessitamos de adubo', cliques: 170, doacoes: 100, mediaDoacoesMes: 10, visitantesUnicos: 300, taxaRetorno: 0.9, eventos: 5, img: 'static/Imagens/Hortas/adubo.jpg' },
        { categoria: 'mudas', title: 'Precisamos de mudas de ma√ß√£', cliques: 920, doacoes: 40, mediaDoacoesMes: 4, visitantesUnicos: 180, taxaRetorno: 0.4, eventos: 2, img: 'static/Imagens/Hortas/mudasdearvore.png' },
        { categoria: 'tecnologia', title: 'Precisamos de sistema de irriga√ß√£o', cliques: 130, doacoes: 70, mediaDoacoesMes: 7, visitantesUnicos: 300, taxaRetorno: 0.7, eventos: 4, img: 'static/Imagens/Hortas/Irrigacao.jpg' },
        { categoria: 'tecnologia', title: 'Instala√ß√£o de sensores de umidade', cliques: 115, doacoes: 65, mediaDoacoesMes: 6.5, visitantesUnicos: 270, taxaRetorno: 0.65, eventos: 3, img: 'static/Imagens/Hortas/sensoresdeumidade.jpg' },
        { categoria: 'sustentabilidade', title: 'Precisamos de uma composteira', cliques: 110, doacoes: 55, mediaDoacoesMes: 5.5, visitantesUnicos: 220, taxaRetorno: 0.55, eventos: 2, img: 'static/Imagens/Hortas/composteira.jpg' },
        { categoria: 'educacao', title: 'Contrata√ß√£o de um bi√≥logo para aula', cliques: 75, doacoes: 35, mediaDoacoesMes: 3.5, visitantesUnicos: 130, taxaRetorno: 0.35, eventos: 1, img: 'static/Imagens/Hortas/aulabiologo.jpeg' },
        { categoria: 'manutencao', title: 'Reparo de cercas', cliques: 520, doacoes: 20, mediaDoacoesMes: 2, visitantesUnicos: 90, taxaRetorno: 0.2, eventos: 0, img: 'static/Imagens/Hortas/cercashortas.jpg' },
        { categoria: 'manutencao', title: 'Manuten√ß√£o de ferramentas', cliques: 60, doacoes: 25, mediaDoacoesMes: 2.5, visitantesUnicos: 95, taxaRetorno: 0.25, eventos: 1, img: 'static/Imagens/Hortas/ferramentasjardinagens.jpg' },
        { categoria: 'tecnologia', title: 'Automa√ß√£o de estufas', cliques: 140, doacoes: 80, mediaDoacoesMes: 8, visitantesUnicos: 350, taxaRetorno: 0.8, eventos: 5, img: 'static/Imagens/Hortas/estufa.jpg' },
        { categoria: 'ferramentas', title: 'Compra de p√°s', cliques: 1120, doacoes: 50, mediaDoacoesMes: 5, visitantesUnicos: 230, taxaRetorno: 0.5, eventos: 2, img: 'static/Imagens/Hortas/pashorta.jpg' },
        { categoria: 'fertilizantes', title: 'Aquisi√ß√£o de fertilizantes org√¢nicos', cliques: 85, doacoes: 40, mediaDoacoesMes: 4, visitantesUnicos: 150, taxaRetorno: 0.4, eventos: 1, img: 'static/Imagens/Hortas/fertilizantes.jpeg' },
        { categoria: 'mudas', title: 'Plantio de √°rvores frut√≠feras', cliques: 95, doacoes: 45, mediaDoacoesMes: 4.5, visitantesUnicos: 190, taxaRetorno: 0.45, eventos: 2, img: 'static/Imagens/Hortas/mudasfrutiferas.jpg' }
    ];

    let paginaAtual = 0;
    const itensPorPagina = 16;

    function calcularScore(card) {
        return (pesos.cliques * card.cliques) +
               (pesos.doacoes * card.doacoes) +
               (pesos.mediaDoacoesMes * card.mediaDoacoesMes) +
               (pesos.visitantesUnicos * card.visitantesUnicos) +
               (pesos.taxaRetorno * card.taxaRetorno) +
               (pesos.eventos * card.eventos);
    }

    function filtrarPorCategoria() {
        const categoriaSelecionada = document.getElementById('categoria').value;
        let cardsFiltrados = cardsData;

        if (categoriaSelecionada !== 'todos') {
            cardsFiltrados = cardsData.filter(card => card.categoria === categoriaSelecionada);
        }

        // Ordenar os cards com base no score de recomenda√ß√£o
        cardsFiltrados.sort((a, b) => {
            const scoreA = calcularScore(a);
            const scoreB = calcularScore(b);
            return scoreB - scoreA;
        });

        exibirCards(cardsFiltrados);
    }

    function exibirCards(cards) {
        const cardsContainer = document.getElementById('cards-container');
        cardsContainer.innerHTML = '';

        let maiorScoreCard = cards[0]; // Card com o maior score
        const mesmaCategoria = cards.filter(card => card.categoria === maiorScoreCard.categoria && card !== maiorScoreCard);
        const outrosCards = cards.filter(card => card.categoria !== maiorScoreCard.categoria);

        // Exibir o card com maior score primeiro
        inserirCard(maiorScoreCard);

        // Em seguida, exibir outros cards da mesma categoria
        mesmaCategoria.forEach(card => {
            inserirCard(card);
        });

        // Exibir os outros cards
        outrosCards.forEach(card => {
            inserirCard(card);
        });
    }

    function inserirCard(card) {
        const cardsContainer = document.getElementById('cards-container');

        const cardElement = document.createElement('div');
        cardElement.classList.add('card');
        cardElement.setAttribute('data-categoria', card.categoria);

        // Add click event to update score
        cardElement.addEventListener('click', () => {
            card.cliques += 1; // Simulate database update
            filtrarPorCategoria(); // Refresh the display
        });

        const imgElement = document.createElement('img');
        imgElement.src = card.img;
        imgElement.alt = card.title;
        cardElement.appendChild(imgElement);

        const cardContent = document.createElement('div');
        cardContent.classList.add('card-content');

        const cardTitle = document.createElement('h3');
        cardTitle.textContent = card.title;
        cardContent.appendChild(cardTitle);

        const cardCategoria = document.createElement('p');
        cardCategoria.textContent = `Categoria: ${card.categoria}`;
        cardCategoria.classList.add('categoria');
        cardContent.appendChild(cardCategoria);

        const cardScore = document.createElement('p');
        cardScore.textContent = `Score de Recomenda√ß√£o: ${calcularScore(card).toFixed(2)}`;
        cardScore.classList.add('score');
        cardContent.appendChild(cardScore);

        cardElement.appendChild(cardContent);

        cardsContainer.appendChild(cardElement);
    }

    // Fun√ß√£o de IA para responder qual horta recomendar
    function obterHortaMaiorScore() {
        let maiorScore = -1;
        let hortaRecomendada = null;
        cardsData.forEach(card => {
            const score = calcularScore(card);
            if (score > maiorScore) {
                maiorScore = score;
                hortaRecomendada = card;
            }
        });

        return hortaRecomendada;
    }

    function enviarMensagem() {
        const chatInput = document.getElementById('chat-input');
        const mensagem = chatInput.value.trim();

        if (mensagem) {
            adicionarMensagem(mensagem, 'user');
            chatInput.value = '';

            if (mensagem.toLowerCase().includes('recomendar') || mensagem.toLowerCase().includes('melhor')) {
                const horta = obterHortaMaiorScore();
                setTimeout(() => {
                    adicionarMensagem(`Recomendamos a horta "${horta.title}" , ela tem a maior probabilidade de voc√™ gostar ${calcularScore(horta).toFixed(2)}.`, 'bot');
                }, 1000);
            } else {
                setTimeout(() => {
                    adicionarMensagem('Desculpe, n√£o entendi sua pergunta. Tente perguntar sobre recomenda√ß√µes de hortas.', 'bot');
                }, 1000);
            }
        }
    }

    function adicionarMensagem(texto, remetente) {
        const chatboxBody = document.getElementById('chatbox-body');
        const mensagemElement = document.createElement('div');

        mensagemElement.classList.add('mensagem');
        mensagemElement.classList.add(remetente); // 'user' ou 'bot'
        mensagemElement.textContent = texto;

        chatboxBody.appendChild(mensagemElement);
        chatboxBody.scrollTop = chatboxBody.scrollHeight;
    }

    document.getElementById('chatbot-btn').addEventListener('click', () => {
        const chatbox = document.getElementById('chatbox');
        chatbox.style.display = chatbox.style.display === 'none' || chatbox.style.display === '' ? 'flex' : 'none';
    });

    // Inicializar a p√°gina exibindo todos os cards
    filtrarPorCategoria();
</script>

</body>
</html>
        